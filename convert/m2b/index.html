<!DOCTYPE html>
<!--[if IE 8]>               <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width" />
<title>Markdown Github to BBCode Feral converter</title>
<link rel="stylesheet" href="css/foundation.css" />
<script src="js/vendor/custom.modernizr.js"></script>
<style type="text/css" media="screen">
.mycustom1 { 
}
.textdivsize {  
height: 300px;
padding: 0px; 
}
.textareasize {
height: 100%;
}
</style>
<script type="text/javascript">
function convert()
{
var left = document.getElementById("left_ta");
var right = document.getElementById("right_ta");
var left_value = left.value;
    //general Markdown conversion
    left_value = left_value
    //
    .replace(/\[(.+?)\]\((.+?)(\s".*")?\)/gmi,'[url=$2]$1[/url]') // url
    //
    .replace(/^(.+)(\n|\r\n)([=]{3,3}\s*(\n|\r\n)?)$/gmi, "[h1]$1[/h1]") // h1
    .replace(/^(.+)(\n|\r\n)([-]{3,3}\s*(\n|\r\n)?)$/gmi, "[h2]$1[/h2]") // h2
    //
    .replace(/^[#]{6,6}\s*(.*[^\s])\s*[#]{6,6}\n?$/gmi, "[h6]$1[/h6]") // h4
    .replace(/^[#]{6,6}\s*(.*)\n?$/gmi, "[h6]$1[/h6]") // h4
    //
    .replace(/^[#]{5,5}\s*(.*[^\s])\s*[#]{5,5}\n?$/gmi, "[h5]$1[/h5]") // h4
    .replace(/^[#]{5,5}\s*(.*)\n?$/gmi, "[h5]$1[/h5]") // h4
    //
    .replace(/^[#]{4,4}\s*(.*[^\s])\s*[#]{4,4}\n?$/gmi, "[h4]$1[/h4]") // h4
    .replace(/^[#]{4,4}\s*(.*)\n?$/gmi, "[h4]$1[/h4]") // h4
    //
    .replace(/^[#]{3,3}\s*(.*[^\s])\s*[#]{3,3}\n?$/gmi, "[h3]$1[/h3]") // h3
    .replace(/^[#]{3,3}\s?(.*)\n?$/gmi, "[h3]$1[/h3]") // h3
    //
    //.replace(/^[#]{2,2}\s*(.*[^\s])\s*[#]{2,2}\n?$/gmi, "[h2]$1[/h2]") // h2
    //.replace(/^[#]{2,2}\s*(.*)\n?$/gmi, "[h2]$1[/h2]") // h2
    //
    //.replace(/^[#]{1,1}\s*(.*[^\s])\s*[#]{1,1}\n?$/gmi, "[h1]$1[/h1]") // h1
    //.replace(/^(?!\n*[`]{3,3})[#]{1,1}\s*(.*)\n?$/gmi, "[h1]$1[/h1]") // h1
    //
    .replace(/^\t|[ ]{4,4}(.*)/gmi, "$1")  //code; strips tabs
    .replace(/^\`{3,3}(.*)\n((?:.|\n)+?)\n\`{3,3}\n?$/gmi, "[code]$2[/code]")   // back ticks
    .replace(/^\~{3,3}(.*)\n((?:.|\n)+?)\n\~{3,3}\n?$/gmi, "[code]$2[/code]")   // tilde
    .replace(/\`([^\`].*?)\`/gmi, "[code single]$1[/code]")  // inline code
    //
    .replace(/\[!\[.*?\]\((.*?)\)\]\((.*?)\)/gmi,'[img]$1[/img]\nClickable image was pointing to [url=$2]here[/url]') //image
    .replace(/!\[(.*)\]\((.*)\)/gmi,'[img]$2[/img]') //image
    //
    .replace(/\*\*\*([^\*].*?)\*\*\*/gmi, "[b][i]$1[/i][/b]") // bold + itlaic
    .replace(/\*\*([^\*].*?)\*\*/gmi, "[b]$1[/b]") // bold
    .replace(/\*([^\*].*?)\*/gmi, "[i]$1[/i]")  // italic
    //
    right.value = left_value;
    console.log('converted');
}
</script>
</head>
<body>

    <div class="row">
        <div class="large-12 columns">
            <h2>Markdown to BBcode</h2>
            <a class="small button" href="https://github.com/feralhosting/markdown-to-bbcode">Fork/Contribute to this version</a>
            <a class="small button" href="http://feralhosting.github.io/">Return to feralhosting.github.io</a>
            <a class="small button" href="http://feralhosting.github.io/convert/b2m/index.html">BBCode to Markdown</a>
            <a class="small button" href="https://www.feralhosting.com/faq/">Return to Feral FAQs</a>
            <a class="small button" href="http://github.com/JonDum/BBCode-To-Markdown-Converter">Credits</a>            
            <hr />
        </div>
    </div>

    <div class="row">
        <div class="large-12 columns">
            <!-- Grid Example -->
            <div class="row">
                <div class="large-12 columns">
                    <div class="panel">
                        <p>
                        Paste your Markdown formatted text into the top box and Feral FAQ formatted BBCode appears in the bottom. Indented code will have the space/tabs stripped. You have to manually apply <kbd>[code][/code]</kbd> tags to these. Github style <kbd>```</kbd> code tags or <kbd>~~~</kbd> will be replaced with <kbd>[code]some code[/code]</kbd> tags.
                        </p>
                        <p>
                        For <kbd>H1</kbd> and <kbd>H2</kbd> tags do not use <kbd>#</kbd> and <kbd>##</kbd>. Instead use <kbd>===</kbd> underneath for <kbd>H1</kbd> and <kbd>---</kbd> underneath for <kbd>H2</kbd> or they will not be converted. So for example:
                        </p>
                        <div>
                        <pre><code>Sometitle H1<br>===</code></pre>
                        <p></p>
                        <pre><code>Sometitle H2<br>---</code></pre>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="large-12 columns mycustom1">
                    <div class="panel textdivsize">
                        <textarea id="left_ta" class="textareasize" onChange="convert()" onKeyUp="convert()" placeholder="Enter your Markdown formatted text here" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter your Markdown formatted text here'"></textarea>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="large-12 columns mycustom1">
                    <div class="panel textdivsize">
                        <textarea id="right_ta" class="textareasize" placeholder="Your BBCode formatted text will be automatically shown in this box" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Your BBCode formatted text will be automatically shown in this box'"></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>
  <script>
  document.write('<script src=' +
  ('__proto__' in {} ? 'js/vendor/zepto' : 'js/vendor/jquery') +
  '.js><\/script>')
  </script>
  
  <script src="js/foundation.min.js"></script>
  <!--
  
  <script src="js/foundation/foundation.js"></script>
  
  <script src="js/foundation/foundation.dropdown.js"></script>
  
  <script src="js/foundation/foundation.placeholder.js"></script>
  
  <script src="js/foundation/foundation.forms.js"></script>
  
  <script src="js/foundation/foundation.alerts.js"></script>
  
  <script src="js/foundation/foundation.magellan.js"></script>
  
  <script src="js/foundation/foundation.reveal.js"></script>
  
  <script src="js/foundation/foundation.tooltips.js"></script>
  
  <script src="js/foundation/foundation.clearing.js"></script>
  
  <script src="js/foundation/foundation.cookie.js"></script>
  
  <script src="js/foundation/foundation.joyride.js"></script>
  
  <script src="js/foundation/foundation.orbit.js"></script>
  
  <script src="js/foundation/foundation.section.js"></script>
  
  <script src="js/foundation/foundation.topbar.js"></script>
  
  -->
  
  <script>
    $(document).foundation();
  </script>
    <script type="text/javascript">
        var textBoxl = document.getElementById("left_ta");
        var textBoxr = document.getElementById("right_ta");
        textBoxl.onfocus = function() {
            textBoxl.select();

            textBoxl.onmouseup = function() {
                textBoxl.onmouseup = null;
                return false;
            };
        };
            textBoxr.onfocus = function() {
            textBoxr.select();

            textBoxr.onmouseup = function() {
                textBoxr.onmouseup = null;
                return false;
            };
        };
        // http://stackoverflow.com/questions/5797539/jquery-select-all-text-from-a-textarea
    </script>
</body>
</html>
